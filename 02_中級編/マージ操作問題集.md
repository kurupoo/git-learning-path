# Git中級編：マージ操作問題集
## 〜3つのマージパターンを実践的にマスター〜

### 🎯 学習概要

**学習方式**: 実践型問題集（段階的マージ体験）  
**学習時間**: 約45分  
**達成レベル**: マージ操作の完全習得  
**前提条件**: Git基礎編の完了

---

## 📚 学習内容（3つのマージパターン完全制覇）

### 🔰 第1問：Fast-forwardマージ
**最もシンプルなマージパターンを体験**

#### 問題文：
新しいfeatureブランチを作成してREADMEを更新し、mainブランチにFast-forwardマージしてください。

#### 実行手順：
```bash
# 1. 新しいブランチ作成・切り替え
git checkout -b feature-readme-update

# 2. README.mdを編集
vi README.md
# 任意の内容を追加（例：## 🎯 中級編学習開始）

# 3. 変更をコミット
git add README.md
git commit -m "Add 中級編 section to README"

# 4. mainブランチに戻る
git checkout main

# 5. Fast-forwardマージ実行
git merge feature-readme-update

# 6. 結果確認
git log --oneline -3
```

#### 期待される結果：
```
Updating 10efa1d..b1ca271
Fast-forward
 README.md | 7 +++++++
 1 file changed, 7 insertions(+)
```

#### 重要なポイント：
- `Fast-forward` メッセージが表示される
- マージコミットは作成されない
- 単純に履歴が前進するだけ

---

### 🚀 第2問：3-wayマージ
**分岐・統合パターンのマージを体験**

#### 問題文：
mainブランチとfeatureブランチで異なるファイルを変更し、マージコミットが発生する3-wayマージを実行してください。

#### 実行手順：
```bash
# 1. 新しいブランチ作成・切り替え
git checkout -b feature-new-section

# 2. 新しいファイルを作成
echo "# 中級編学習メモ" > "02_中級編/学習メモ.md"
echo "マージ操作の実践中です！" >> "02_中級編/学習メモ.md"

# 3. 変更をコミット
git add "02_中級編/学習メモ.md"
git commit -m "Add 学習メモ in 02_中級編"

# 4. mainブランチに戻って別の変更
git checkout main
echo "更新日: $(date)" >> README.md
git add README.md
git commit -m "Update README with current date"

# 5. 3-wayマージ実行
git merge feature-new-section

# 6. 履歴の確認（重要！）
git log --oneline --graph -5
```

#### 期待される結果：
```
Merge made by the 'ort' strategy.
 "02_中級編/学習メモ.md" | 2 ++
 1 file changed, 2 insertions(+)

# git log --graph の結果：
*   cf68508 (HEAD -> main) Merge branch 'feature-new-section'
|\  
| * bfdb576 Add 学習メモ in 02_中級編
* | 20c1a02 Update README with current date
|/  
```

#### 重要なポイント：
- マージコミットが自動作成される
- 履歴が分岐・統合のパターンを示す
- 異なるファイルを変更した場合の自動統合

---

### ⭐ 第3問：コンフリクト解決
**最も重要なマージスキル - 手動でのコンフリクト解決**

#### 問題文：
同じファイルの同じ箇所を異なる内容で変更し、コンフリクトを発生させて手動で解決してください。

#### 実行手順：
```bash
# 1. 新しいブランチ作成
git checkout -b feature-conflict-test

# 2. README.mdの末尾に追加
vi README.md
# 末尾に以下を追加：
# ## 学習進捗
# - 基礎編: 完了 ✅
# - 中級編: 進行中（マージ操作学習中）🚧

# 3. コミット
git add README.md
git commit -m "Add 学習進捗 section from feature branch"

# 4. mainブランチで同じ箇所を違う内容で変更
git checkout main
vi README.md
# 末尾に以下を追加：
# ## 現在の状況
# - Git基礎: マスター済み
# - Git中級: マージ操作を実践中

# 5. mainでコミット
git add README.md
git commit -m "Add 現在の状況 from main branch"

# 6. コンフリクト発生マージ
git merge feature-conflict-test
```

#### 期待されるコンフリクト：
```
Auto-merging README.md
CONFLICT (content): Merge conflict in README.md
Automatic merge failed; fix conflicts and then commit the result.
```

#### コンフリクト解決手順：
```bash
# 7. コンフリクト状況確認
git status

# 8. コンフリクト内容確認
cat README.md
# コンフリクトマーカーが表示される：
# <<<<<<< HEAD
# ## 現在の状況
# - Git基礎: マスター済み
# - Git中級: マージ操作を実践中
# =======
# ## 学習進捗
# - 基礎編: 完了 ✅
# - 中級編: 進行中（マージ操作学習中）🚧
# >>>>>>> feature-conflict-test

# 9. 手動でコンフリクト解決
vi README.md
# コンフリクトマーカーを削除し、内容を統合
# 例：
# ## 学習状況
# - Git基礎: 完了 ✅
# - Git中級: マージ・コンフリクト解決を実践中 🚧

# 10. 解決をコミット
git add README.md
git commit -m "Resolve merge conflict in README.md"

# 11. 最終確認
git log --oneline --graph -8
```

#### 期待される最終結果：
```
*   e7ffdda (HEAD -> main) Resolve merge conflict in README.md
|\  
| * 72ab901 Add 学習進捗 section from feature branch
* | c3e1e16 Add 現在の状況 from main branch
|/  
```

---

## 🎯 よくある間違いと対処法

### ❌ よくある間違い 1: コンフリクトマーカーの見方
**間違い例**: コンフリクトマーカーをそのまま残してコミット

**正しい対処**:
- `<<<<<<< HEAD` ～ `=======` がHEAD（現在のブランチ）の内容
- `=======` ～ `>>>>>>> ブランチ名` がマージしようとするブランチの内容
- これらのマーカーを**全て削除**して、統合した内容に編集

### ❌ よくある間違い 2: マージの取り消し方法
**状況**: マージを間違えて実行してしまった

**対処法**:
```bash
# コンフリクト解決前なら
git merge --abort

# マージ完了後なら（注意！）
git reset --hard HEAD~1
```

### ❌ よくある間違い 3: ブランチの状況確認不足
**間違い例**: どのブランチにいるか確認せずにマージ

**正しい対処**:
```bash
# 現在の状況を必ず確認
git status
git branch -a
git log --oneline -3
```

---

## 🏆 習得したスキル一覧

### ✅ マージコマンド
- `git merge <ブランチ名>` - ブランチのマージ実行
- `git merge --abort` - マージの取り消し

### ✅ マージパターンの理解
- **Fast-forward**: 履歴が一直線に進むマージ
- **3-way**: 分岐・統合のマージコミット作成
- **Conflict**: 手動解決が必要なマージ

### ✅ 履歴確認コマンド
- `git log --oneline --graph` - 分岐・統合の視覚的確認
- `git status` - マージ状況の確認

### ✅ コンフリクト解決スキル
- コンフリクトマーカーの読み方
- 手動での内容統合
- 解決後のコミット方法

---

## 💡 実際の開発での活用

### 🔥 典型的な開発フロー
```bash
# feature開発
git checkout -b feature-login
# ... 開発作業 ...
git add .
git commit -m "Add login functionality"

# mainに統合
git checkout main
git pull origin main  # 最新を取得
git merge feature-login

# コンフリクトが発生した場合
# → 手動解決 → git add → git commit

git push origin main
git branch -d feature-login  # 不要ブランチ削除
```

### 🛡️ 安全なマージのポイント
- マージ前に必ず `git status` で状況確認
- 重要な作業前には `git stash` でバックアップ
- コンフリクト解決後は動作確認を必ず実施
- チーム開発では Pull Request を活用

---

## 🚀 次のステップ

### 🎯 中級編の次の学習
1. **リベース操作**: `git rebase` による履歴の整理
2. **高度なブランチ戦略**: Git Flow, GitHub Flow
3. **チーム開発**: Pull Request, コードレビュー

### 💪 継続学習のポイント
- 実際のプロジェクトでマージ操作を実践
- コンフリクト解決に慣れる（意図的に練習）
- チームメンバーとの協業でマージスキルを向上

---

## 🎊 まとめ

**マージ操作の3パターンを完全マスター**:
- ✅ Fast-forward: シンプルな統合パターン
- ✅ 3-way: 分岐・統合パターン
- ✅ Conflict: 手動解決パターン

**実際の開発で即戦力となるスキルを習得**:
- ✅ 安全なマージ手順の理解
- ✅ コンフリクト解決の実践的スキル
- ✅ 履歴管理の重要性の理解

これでチーム開発でも安心してマージ操作ができるレベルに到達しました！

---

*Created by: Git実践学習プログラム*  
*Learning Method: 段階的マージ体験による実践的スキル習得*  
*実践日: 2025年9月25日*
